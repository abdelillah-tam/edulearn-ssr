<div class="flex min-h-dvh flex-col">
  <main
    class="flex h-full w-full grow items-center justify-center px-4 md:px-8"
  >
    <ul
      class="flex h-full w-full flex-col items-center justify-evenly gap-8 md:flex-row md:gap-0"
    >
      <li
        class="flex basis-1/3 cursor-pointer flex-col items-center gap-4 select-none"
        routerLink="/"
      >
        <div class="bg-red-theme flex rounded-xl p-2">
          <mat-icon
            class="material-symbols-rounded mat-icon"
            fontIcon="school"
          ></mat-icon>
        </div>
        <h1 class="px-1 text-lg">EduLearn Platform</h1>
      </li>

      <li
        class="flex w-full flex-col rounded-xl border border-gray-300 md:basis-1/3"
      >
        <div class="flex flex-col gap-2 p-4">
          <p class="font-bold">Welcome Back</p>
          <p class="text-gray-500">Sign in to your account</p>
        </div>
        <form
          class="flex w-full flex-col gap-4 p-4"
          [formGroup]="signinFormGroup"
        >
          <ul
            class="flex w-full justify-between gap-4 rounded-xl bg-red-100 p-1"
          >
            <li class="flex basis-1/2 justify-center">
              <label
                class="flex w-full cursor-pointer justify-center rounded-xl py-1 font-bold"
                [class.bg-white]="selectedType === 0"
              >
                <input
                  type="radio"
                  (click)="selectType(0)"
                  formControlName="type"
                  class="appearance-none"
                  value="Student"
                  name="type"
                />
                Student
              </label>
            </li>
            <li class="flex basis-1/2 cursor-pointer justify-center">
              <label
                class="flex w-full cursor-pointer justify-center rounded-xl py-1 font-bold"
                [class.bg-white]="selectedType === 1"
              >
                <input
                  type="radio"
                  (click)="selectType(1)"
                  formControlName="type"
                  class="appearance-none"
                  value="Instructor"
                  name="type"
                />
                Instructor
              </label>
            </li>
          </ul>

          <div
            class="grid w-full grid-rows-[1fr_calc(var(--spacing)*10)_1fr] gap-1"
          >
            <label for="" class="flex items-end font-bold">Email</label>
            <input
              class="input-style"
              type="email"
              placeholder="student@example.com"
              formControlName="email"
            />
            @if (
              signinFormGroup.controls.email.invalid &&
              signinFormGroup.controls.email.touched
            ) {
              @if (signinFormGroup.controls.email.errors?.["required"]) {
                <p class="error">This field is required</p>
              } @else if (signinFormGroup.controls.email.errors?.["email"]) {
                <p class="error">Enter a valid email</p>
              }
            }
          </div>

          <div
            class="grid w-full grid-rows-[1fr_calc(var(--spacing)*10)_1fr] gap-1"
          >
            <label for="" class="flex items-end font-bold">Password</label>
            <input
              class="input-style"
              type="password"
              placeholder="••••••••"
              formControlName="password"
            />
            @if (
              signinFormGroup.controls.password.invalid &&
              signinFormGroup.controls.password.touched
            ) {
              <p class="error">This field is required</p>
            }
          </div>

          <button
            type="button"
            class="red-btn flex items-center justify-center"
            (click)="signin()"
            [disabled]="isSigninLoading"
          >
            @if (isSigninLoading) {
              <mat-spinner class="signin-loading" [diameter]="25"></mat-spinner>
            } @else {
              Sign In as {{ selectedType ? "Instructor" : "Student" }}
            }
          </button>

          <button
            type="button"
            class="text-red-theme w-full cursor-pointer hover:underline"
          >
            Forgot Password?
          </button>

          <button type="button" class="w-full text-gray-500">
            Don't you have an account?
            <a
              class="text-red-theme cursor-pointer hover:underline"
              routerLink="/signup"
              >Sign up</a
            >
          </button>
        </form>
      </li>
    </ul>
  </main>
</div>
