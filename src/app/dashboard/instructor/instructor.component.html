<div class="flex grow flex-col gap-8 px-4 py-8 md:px-8">
  <section class="flex flex-col">
    <p class="text-xl font-bold">{{ user()?.fullname }}'s dashboard</p>
    <p class="text-gray-500">Welcome back! Here's your courses.</p>
  </section>
  <section
    class="flex grow flex-col-reverse justify-between gap-4 md:flex-row md:items-start"
  >
    <div
      class="flex h-full grow basis-5/7 flex-col gap-4 rounded-xl border border-gray-300 bg-white p-5"
    >
      <div class="flex items-center justify-between">
        <p class="text-lg font-bold">My Courses</p>
        <button class="red-btn flex items-center" routerLink="/create">
          <mat-icon class="material-symbols-rounded" fontIcon="add"></mat-icon>
          New Course
        </button>
      </div>
      @if (isLoading) {
        <div class="flex grow items-center justify-center py-4">
          <mat-spinner class="enroll-loading" [diameter]="40"></mat-spinner>
        </div>
      } @else if (courses().courses.length) {
        @for (item of courses().courses; track $index) {
          <ul class="flex overflow-hidden rounded-xl border border-gray-300">
            <li class="basis-2/5 md:basis-2/8">
              <img class="h-full w-full object-cover" [src]="item.thumbnail" />
            </li>
            <li
              class="flex basis-3/5 flex-col items-start justify-between gap-8 p-8 md:basis-6/8"
            >
              <div class="flex flex-col gap-1">
                <p class="text-lg">{{ item.title }}</p>
                <div class="flex items-center gap-1 text-gray-500">
                  <mat-icon
                    class="material-symbols-rounded"
                    fontIcon="group"
                  ></mat-icon
                  >{{ item.users_count | number }}
                  @if (item.users_count == 1) {
                    student
                  } @else {
                    students
                  }
                </div>
              </div>
            </li>
          </ul>
        }
      } @else {
        <div class="flex grow items-center justify-center">
          <p class="grow text-center text-gray-500">
            You didn't create any course yet.
          </p>
        </div>
      }
    </div>
    <div
      class="flex basis-2/7 flex-col gap-2 rounded-xl border border-gray-300 bg-white p-5"
    >
      <p>Courses</p>
      @if (isLoading) {
        <div class="flex items-center justify-center py-4">
          <mat-spinner class="enroll-loading" [diameter]="40"></mat-spinner>
        </div>
      } @else {
        <p class="text-lg font-bold">{{ courses().count }}</p>
      }
    </div>
  </section>
</div>
